<!DOCTYPE html>
<html>

<head>
    <!-- jQuery  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <meta charset="utf-8">
</head>

<body>
    Smart Teg Team7

    <script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"></script>

    <script>
        // Import Admin SDK
        var admin = require("firebase-admin");

        // Get a database reference to our blog
        var db = admin.database();
        var ref = db.ref("server/saving-data/fireblog");

        var serviceAccount = require("C:\Users\dbfl2\Downloads\lost-smart-teg-firebase-adminsdk-c831y-04b792d9e0.json");

        admin.initializeApp({
            credential: admin.credential.cert(serviceAccount),
            databaseURL: "https://lost-smart-teg-default-rtdb.firebaseio.com"
        });


        var refreshToken; // Get refresh token from OAuth2 flow

        admin.initializeApp({
            credential: admin.credential.refreshToken(refreshToken),
            databaseURL: 'https://lost-smart-teg-default-rtdb.firebaseio.com/'
        });

        // Initialize the default app
        var admin = require('firebase-admin');
        var app = admin.initializeApp();
    </script>

    <script>
        // Set the configuration for your app
        // TODO: Replace with your project's config object
        var config = {
            apiKey: "AIzaSyBEvDOks4bxG5eBoNHVttkhG4PewsrMVBs",
            authDomain: "lost-smart-teg.firebaseapp.com",
            databaseURL: "https://lost-smart-teg-default-rtdb.firebaseio.com/",
            storageBucket: "lost-smart-teg.appspot.com"
        };
        firebase.initializeApp(config);

        // Google provide
        var provider = new firebase.auth.GoogleAuthProvider();

        firebase.auth().signInWithPopup(provider).then(function(result) {
            // This gives you a Google Access Token. You can use it to access the Google API.
            var token = result.credential.accessToken;
            // The signed-in user info.
            var user = result.user;

            console.log(user)
                // ...
        }).catch(function(error) {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;
            // The email of the user's account used.
            var email = error.email;
            // The firebase.auth.AuthCredential type that was used.
            var credential = error.credential;
            // ...
        });

        // Get a reference to the database service
        var database = firebase.database();

        database.ref('locations/Mak9Ddkew2ND1Eun8C').set({
            "lat": "37.29058525364734",
            "lng": "127.20514310985279",
            "timestamp": "162257663489"
        })

        var dbTestRef = database.ref('Users')
        dbTestRef.on('child_added', function(data) {
            console.log(data.val())
        })

        var dbTestRef = database.ref('locations')
        dbTestRef.on('child_added', function(data) {
            console.log(data.val())
        })
    </script>

</body>

<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="/__/firebase/8.6.3/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
 https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="/__/firebase/8.6.3/firebase-analytics.js"></script>

<!-- Initialize Firebase -->
<script src="/__/firebase/init.js"></script>

</html>